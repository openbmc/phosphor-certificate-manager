{
  "comments": [
    {
      "key": {
        "uuid": "cf090212_4580c200",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2021-12-09T09:53:24Z",
      "side": 1,
      "message": "BMCweb is the only one consumer for certificate manger . There are other application like lda/user mangers also consumed the certificate uploaded using cert intreface.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dee14ad7_e6cff722",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000089
      },
      "writtenOn": "2021-12-09T10:16:27Z",
      "side": 1,
      "message": "I assume with the new glibc patch which changes time_t from uint32_t to uint64_t we should be able to support certificates beyong 2038? so are we using the new glibc in the build already?",
      "parentUuid": "cf090212_4580c200",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee85008a_3be93cf0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2021-12-09T15:20:13Z",
      "side": 1,
      "message": "Hello Jayanth, are lda/user mangers public codes? If so, I can potentially fix them as well.\n\nAnd yeah, glibc 2.32 + kernel 5.10 should have 64 bit time_t already, could we turn it on and unblock this change?\n\nHello MARRI, is there anything I can do to get the \"-1\" removed?",
      "parentUuid": "dee14ad7_e6cff722",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37b0bca2_1aac3936",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-09T17:20:09Z",
      "side": 1,
      "message": "\u003e I assume with the new glibc patch which changes time_t from uint32_t to uint64_t we should be able to support certificates beyong 2038?\n\nWith Nans patch to bmcweb, it can support times beyond 2038 as-is.  The internal time_t can\u0027t yet, but that will come in glibc, but that\u0027s outside the scope of this patch.  In dbus, we already define all times as 64 bit, so this patch should be able to go in as-is.",
      "parentUuid": "ee85008a_3be93cf0",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35ad7487_41c7752b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-09T20:43:09Z",
      "side": 1,
      "message": "\u003e lda/user mangers also consumed the certificate\n\nI\u0027m assuming lda is ldap, which I don\u0027t think Nan has a way to test.  Is this something you could help test with this patch?  FWIW, the only handling in BMCweb was to just fix a bug with casting dbus interfaces to time_t.  Given that those other applications don\u0027t do that, and just push directly to openssl, I would expect this change to just work.\n\n\nIf nan limited this change to only allow \u003e2038 for webserver certificates, would that be a good stepping stone?",
      "parentUuid": "37b0bca2_1aac3936",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "282ac0e6_9f1918f9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2021-12-09T21:59:26Z",
      "side": 1,
      "message": "Hello Ed, we (Google) need to allow \u003e2038 for both root and webserver certs.",
      "parentUuid": "35ad7487_41c7752b",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef1787ce_2c51794b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-09T22:07:33Z",
      "side": 1,
      "message": "Yep, I asked the question  poorly.  In my head, I was also counting the root certificates as \"webserver\" because we use them for mtls.   rephrased:\n\nIf nan limited this change to only allow \u003e2038 for webserver and authority certificates (both of which don\u0027t have a 2038 limitation), would that be a good stepping stone?",
      "parentUuid": "282ac0e6_9f1918f9",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91f54d45_68d2b646",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2021-12-10T05:17:47Z",
      "side": 1,
      "message": "@Nan Zhou, Certificate manager upload is the entry point for all certificate uploads. prefer to keep validity check in certificate manager.",
      "parentUuid": "ef1787ce_2c51794b",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "166b7672_fc1bc8cd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-12-10T06:53:23Z",
      "side": 1,
      "message": "Jayanth, can you explain more why?  If the limit is not required anymore for webserver or authority certificates, there\u0027s no reason to have it, right?  If there are reasons to have it, we could make it build-time configurable?",
      "parentUuid": "91f54d45_68d2b646",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d446a9d9_e808c2ca",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2021-12-10T22:30:58Z",
      "side": 1,
      "message": "Hello Jayanth, are you saying we should move the check to \"certificate_manager.cc\"? But all X509 properties extraction is in \"certificate.cc\". The existing 2038 check is also in \"certificate.cc\". Given that, I prefer to keep validity check still in \"certificate.cc\". Does that make sense to you?",
      "parentUuid": "166b7672_fc1bc8cd",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "862cc4e0_5a1d7f8d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 11
      },
      "lineNbr": 11,
      "author": {
        "id": 1000086
      },
      "writtenOn": "2021-12-11T03:22:40Z",
      "side": 1,
      "message": "Ed/Nan, Main concern here after making this change any side effect with other BMC applications, which is consumed by the certificates uploaded via this certificate manager. Good part is that Nan already fixed BMCweb related issues.\n\nAm good if  the community agrees  This direction.  Also need  to make sure we should display \"ValidNotAfter\" atytribute corectly to avoid confusion in the users.\n \nNan Can you confirm \" - name: ValidNotAfter\" property is printing correct year? Based on test results  shared here \"253402300799\" is related to 9999/12/31?\n\nusing some web based tool \n253402300799 --\u003e \n{\"Supports Unix timestamps in seconds, milliseconds, microseconds and nanoseconds.\nAssuming that this timestamp is in milliseconds:\nGMT: Wednesday, January 11, 1978 9:31:40.799 PM\nYour time zone: Thursday, January 12, 1978 3:01:40.799 AM GMT+05:30\nRelative: 44 years ago\"\nCan you confirm this.",
      "parentUuid": "d446a9d9_e808c2ca",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ec44eb81_b5acf135",
        "filename": "certificate.cpp",
        "patchSetId": 11
      },
      "lineNbr": 430,
      "author": {
        "id": 1000089
      },
      "writtenOn": "2021-12-09T10:12:20Z",
      "side": 1,
      "message": "should the method be now called validateCertificateStartDate?",
      "range": {
        "startLine": 430,
        "startChar": 18,
        "endLine": 430,
        "endChar": 47
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c2ff4027_8349b5fb",
        "filename": "certificate.cpp",
        "patchSetId": 11
      },
      "lineNbr": 430,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2021-12-09T15:20:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ec44eb81_b5acf135",
      "range": {
        "startLine": 430,
        "startChar": 18,
        "endLine": 430,
        "endChar": 47
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3ebcde9_6232bf79",
        "filename": "test/certs_manager_test.cpp",
        "patchSetId": 11
      },
      "lineNbr": 994,
      "author": {
        "id": 1000089
      },
      "writtenOn": "2021-12-09T10:12:20Z",
      "side": 1,
      "message": "formating issue\u003e",
      "range": {
        "startLine": 993,
        "startChar": 0,
        "endLine": 994,
        "endChar": 9
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3c708fc6_aede3876",
        "filename": "test/certs_manager_test.cpp",
        "patchSetId": 11
      },
      "lineNbr": 994,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2021-12-09T15:20:13Z",
      "side": 1,
      "message": "Good catch!",
      "parentUuid": "f3ebcde9_6232bf79",
      "range": {
        "startLine": 993,
        "startChar": 0,
        "endLine": 994,
        "endChar": 9
      },
      "revId": "e8065915ebacdf8390162d30fbe1c364c2f30957",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}