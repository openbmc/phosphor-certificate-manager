{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "058bcf3d_14d0ea66",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 10
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T17:48:13Z",
      "side": 1,
      "message": "Looking good except for the service file thing.",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ba36d7f_1fb335e4",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-03-11T17:43:29Z",
      "side": 1,
      "message": "This is needed since I didn\u0027t find a good way in CLI11 to pass an empty string for UNIT. This is required to get Robot Test CI pass.",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8e8b941_32b20217",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T17:48:13Z",
      "side": 1,
      "message": "I\u0027m not understanding this comment, and having to launch sh before launching the application is a level of complexity we  don\u0027t really want here.  When would we ever pass an empty string to this?\n\nEven if we needed to, would quoting it (ie --unit\u003d\"${UNIT}\" ) solve the issue?  I\u0027m still not sure why we need it though.",
      "parentUuid": "9ba36d7f_1fb335e4",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac1c76ae_13566bc9",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-03-11T18:42:32Z",
      "side": 1,
      "message": "The problem comes from the \"pcm@nslcd\" service. I couldn\u0027t find the source of its env file. But in the QEMU, it\u0027s something like\n\n```\nENDPOINT\u003dnslcd\nCERTPATH\u003d/etc/ssl/certs/authority\nTYPE\u003dnslcd\n```\nwhich doesn\u0027t define \"UNIT\". It results in ExecStart is equal to \"/usr/bin/env phosphor-certificate-manager --endpoint\u003dxxx --path\u003dxxx --unit\u003d --type\u003dxxx\", and CLI11 complains about no TEXT for the unit option. \n\nI have tried various method\n\n1. --unit\u003d\"${UNIT}\"\n2. --unit\u003d\u0027${UNIT}\u0027\n3. escape quote\n4. escape single quote\n5. default variable: ${UNIT:\u003d\"\"} and its escaped version\n\nUnfortunately none of them worked. The reason might be cause by the weird systemd built-in string parse. \"if else\" with bash script is only one which worked. \n\nI also tried if there\u0027s a way to not requiring a value for an option in CLI11 but it seems impossible.\n\n\"/bin/sh\" should be available in most linux distro. Given that many other OpenBMC and Google BMC services also use it, it might not be a big deal.",
      "parentUuid": "a8e8b941_32b20217",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a54708df_ce7b0fbc",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T18:46:39Z",
      "side": 1,
      "message": "Can we just add UNIT to the PCM service file?",
      "parentUuid": "ac1c76ae_13566bc9",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cac3424e_ac5cc25e",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T18:59:22Z",
      "side": 1,
      "message": "actually... what even is pcm?",
      "parentUuid": "a54708df_ce7b0fbc",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "deda44f4_7ed9b335",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-03-11T19:15:03Z",
      "side": 1,
      "message": "\u003e actually... what even is pcm?\n`phosphor-certificate-manager@nslcd.service`\n\nAdding UNIT might work given that EnvironmentFile overrides Environment. I am testing the following on QEMU.\n\n```\nEnvironment\u003dUNIT\u003d\"\"\nEnvironmentFile\u003d/usr/share/phosphor-certificate-manager/%I\nExecStart\u003d/usr/bin/env phosphor-certificate-manager --endpoint ${ENDPOINT} --path ${CERTPATH} --type ${TYPE} --unit ${UNIT}\n```",
      "parentUuid": "cac3424e_ac5cc25e",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c9f2020_89113aca",
        "filename": "dist/phosphor-certificate-manager@.service",
        "patchSetId": 10
      },
      "lineNbr": 6,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-03-11T19:29:23Z",
      "side": 1,
      "message": "Done. Cool. It worked. And it\u0027s cleaner.",
      "parentUuid": "deda44f4_7ed9b335",
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7f75aff_9e42f251",
        "filename": "mainapp.cpp",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T17:48:13Z",
      "side": 1,
      "message": "Should we be printing the help strings here?  or does cli11 do that for us?",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 47,
        "endChar": 32
      },
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "304ec2bb_0335a8a7",
        "filename": "mainapp.cpp",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1000682
      },
      "writtenOn": "2022-03-11T18:44:05Z",
      "side": 1,
      "message": "CLI does that when it calls app.exit() which is hidden in the CLI11_PARSE macro.",
      "parentUuid": "e7f75aff_9e42f251",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 47,
        "endChar": 32
      },
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3996b2cd_5124a86b",
        "filename": "mainapp.cpp",
        "patchSetId": 10
      },
      "lineNbr": 47,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-03-11T18:59:22Z",
      "side": 1,
      "message": "ACK",
      "parentUuid": "304ec2bb_0335a8a7",
      "range": {
        "startLine": 47,
        "startChar": 0,
        "endLine": 47,
        "endChar": 32
      },
      "revId": "b936e7889d12a5fc4cb9a3e82cfbe3ecfb561385",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}